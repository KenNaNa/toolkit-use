/*!
 * toolkit-use v0.1.4
 * (c) 2023 ~ 至今 kennana
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("core-js/modules/es.json.stringify.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.regexp.to-string.js"),require("crypto-js")):"function"==typeof define&&define.amd?define(["exports","core-js/modules/es.json.stringify.js","core-js/modules/es.object.keys.js","core-js/modules/es.array.filter.js","core-js/modules/es.object.to-string.js","core-js/modules/es.regexp.to-string.js","crypto-js"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["/src/storage/index"]=e["/src/storage/index"]||{},e["/src/storage/index"].ts={}),null,null,null,null,null,e.CryptoJS)}(this,(function(e,t,r,o,n,i,s){"use strict";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var c=s.enc.Utf8.parse("3333e6e143439161"),l=s.enc.Utf8.parse("e3bbe7e3ba84431a"),a="localStorage",f="SDF_0.0.1",g=1,d=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(""!==t&&null!=t||(t=null),isNaN(r)||r<0)throw new Error("Expire must be a number");r=1e3*(r||g);var o={value:t,time:Date.now(),expire:r},n=S(JSON.stringify(o));window[a].setItem(m(e),n)},y=function(){for(var e=window[a].length,t=new Array,r=0;r<e;r++){var o=window[a].key(r),n=window[a].getItem(o);t[r]={key:o,val:n}}return t},p=function(e){window[a].removeItem(m(e))},m=function(e){return f+"_"+e},j=function(e){var t=f.length+1;return e.substr(t)},S=function(e){if("object"===u(e))try{e=JSON.stringify(e)}catch(e){console.log("encrypt error:",e)}var t=s.enc.Utf8.parse(e);return s.AES.encrypt(t,c,{iv:l,mode:s.mode.CBC,padding:s.pad.Pkcs7}).ciphertext.toString()},w=function(e){var t=s.enc.Hex.parse(e),r=s.enc.Base64.stringify(t),o=s.AES.decrypt(r,c,{iv:l,mode:s.mode.CBC,padding:s.pad.Pkcs7});return o.toString(s.enc.Utf8).toString()},b={isSupportStorage:function(){return"undefined"!=typeof Storage},setStorage:d,getStorage:function(e){if(e=m(e),!window[a].getItem(e)||"null"===JSON.stringify(window[a].getItem(e)))return null;var t=JSON.parse(w(window[a].getItem(e))),r=Date.now();return t.expire&&6e3*g<r-t.time?(p(e),null):(d(j(e),t.value),t.value)},hasStorage:function(e){return e=m(e),!!y().filter((function(t){return t.key===e})).length},getStorageKeys:function(){for(var e=y(),t=[],r=0;r<e.length;r++){var o=e[r].key;t.push(o)}return t},getStorageForIndex:function(e){return window[a].key(e)},getStorageLength:function(){return window[a].length},getStorageAll:y,removeStorage:p,clearStorage:function(){window[a].clear()},autoAddPrefix:m,autoRemovePrefix:j,encrypt:S,decrypt:w};e.ToolkitUseStorage=b}));
